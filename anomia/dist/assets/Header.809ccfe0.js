import{w as k,S as j,i as A,s as H,e as p,b as v,f as h,g as f,n as m,q as d,u as _,v as w,h as S,l as I,x as T}from"./vendor.2446a3b2.js";let g=k({}),b=k(!1);const y="http://127.0.0.1:3333",C={auth:{login:"auth/login",register:"auth/register"}};let x;g.subscribe(l=>{sessionStorage.setItem("token",l.token),console.log("\u{1F4BB} user state changed.")});b.subscribe(l=>{console.log(l),x=l,console.log("\u{1F4BB} Authenticated state changed.")});function O(){console.log("Logigng out."),g.set({}),b.set(!1),sessionStorage.removeItem("token")}function U(l,t){if(console.log("Starting registration"),x)return!1;fetch(`${y}/${C.auth.register}`,{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify({username:l,password:t})}).then(o=>o.json()).then(o=>{o.error===!0&&(console.log("\u{1F4BB} Error!"),console.log(o))}),console.log("\u{1F4BB} Request done.")}function J(l,t){if(console.log("Starting logging"),x)return console.log("User is logged in fuck you"),!1;console.log("User is not logged in.."),fetch(`${y}/${C.auth.login}`,{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify({username:l,password:t})}).then(o=>(console.log("response obtained, parsing..."),o.json())).then(o=>{console.log("\u{1F4BB} Authenticated, setting token..."),b.set(!0),g.set({username:l,token:o.token.token}),sessionStorage.setItem("token",o.token.token)})}function P(l){let t,o,s=l[1].username+"",r,i,n,a,c;return{c(){t=p("div"),o=w("Hi "),r=w(s),i=v(),n=p("div"),n.textContent="Log out",h(n,"class","hover:underline transition-all duration-300 ease-in-out hover:bg-white hover:text-black")},m(e,u){f(e,t,u),S(t,o),S(t,r),f(e,i,u),f(e,n,u),a||(c=I(n,"click",O),a=!0)},p(e,u){u&2&&s!==(s=e[1].username+"")&&T(r,s)},d(e){e&&d(t),e&&d(i),e&&d(n),a=!1,c()}}}function $(l){let t,o,s,r,i;return{c(){t=p("a"),t.textContent="Sign In",o=v(),s=p("div"),s.textContent="|",r=v(),i=p("a"),i.textContent="Sign Up",h(t,"class","hover:underline transition-all duration-300 ease-in-out hover:bg-white hover:text-black"),h(t,"href","/auth"),h(s,"class","inline text-lg font-bold"),h(i,"class","hover:underline transition-all duration-300 ease-in-out hover:bg-white hover:text-black"),h(i,"href","/auth")},m(n,a){f(n,t,a),f(n,o,a),f(n,s,a),f(n,r,a),f(n,i,a)},p:m,d(n){n&&d(t),n&&d(o),n&&d(s),n&&d(r),n&&d(i)}}}function q(l){let t,o,s,r,i;function n(e,u){return e[0]?P:$}let a=n(l),c=a(l);return{c(){t=p("div"),t.textContent="Anomia",o=v(),s=p("div"),c.c(),r=v(),i=p("div"),i.innerHTML=`<a class="hover:underline transition-all duration-300 ease-in-out hover:bg-white hover:text-black p-1" href="/">Home</a> 
  <a class="hover:underline transition-all duration-300 ease-in-out hover:bg-white hover:text-black p-1" href="">SBC</a> 
  <a class="hover:underline transition-all duration-300 ease-in-out hover:bg-white hover:text-black p-1" href="">ETH</a> 
  <a class="hover:underline transition-all duration-300 ease-in-out hover:bg-white hover:text-black p-1" href="">Files</a> 
  <a class="hover:underline transition-all duration-300 ease-in-out hover:bg-white hover:text-black p-1" href="">Privacy</a> 
  <a class="hover:underline transition-all duration-300 ease-in-out hover:bg-white hover:text-black p-1" href="">Moe</a>`,h(t,"class","text-6xl border m-2 w-max mx-auto px-6"),h(s,"class","p-2 w-max mx-auto -my-2"),h(i,"class","p-2 space-x-3 text-center mx-1 md:w-max md:mx-auto")},m(e,u){f(e,t,u),f(e,o,u),f(e,s,u),c.m(s,null),f(e,r,u),f(e,i,u)},p(e,[u]){a===(a=n(e))&&c?c.p(e,u):(c.d(1),c=a(e),c&&(c.c(),c.m(s,null)))},i:m,o:m,d(e){e&&d(t),e&&d(o),e&&d(s),c.d(),e&&d(r),e&&d(i)}}}function E(l,t,o){let s,r;return _(l,b,i=>o(0,s=i)),_(l,g,i=>o(1,r=i)),[s,r]}class M extends j{constructor(t){super();A(this,t,E,q,H,{})}}export{M as H,b as a,J as l,U as r};
